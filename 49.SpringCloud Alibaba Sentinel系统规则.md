sentinel 系统规则



系统自适应限流



Sentinel系统自适应限流从整体维度对应用入口流量进行控制，结合应用的Load、CPU使用率、总体平均RT、入口QPS和并发线程数等几个维度的监控指标，通过自适应的流控策略，让系统的入口流量和系统的负载达到一个平衡，让系统尽可能泡在最大吞吐量的同时保证系统整体的稳定性。



操作方法



在Sentinel控制台上 点击左侧系统规则

点击新增系统规则



系统规则支持以下的模式：

- Load自适应（仅对Linux/Unix-like机器生效）：系统的Load1作为启发指标，进行自适应系统保护。当系统的load1超过设定的启发值，且系统当前的并发线程数超过估算的系统容量时才会触发保护（BBR阶段）。系统容量由系统maxQps*maxRt估算得出。设定参考值一般是CPU cores x 2.5。

- CPU usage（1.5.0+版本）：当系统CPU使用率超过阈值即触发系统保护（取值范围0.0-1.0），比较灵敏。

- 平均RT：当单台机器上所有入口流量的平均RT达到阈值即触发系统保护，单位是毫秒。

- 并发线程数：当单台机器上所有入口流量的并发线程数达到阈值即触发系统保护。

- 入口QPS：当单台机器上所有入口流量的QPS达到阈值即触发系统保护。