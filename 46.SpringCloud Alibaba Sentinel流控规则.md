

## SpringCloud Alibaba Sentinel流控规则

流控是指流量控制 不是流程控制



## 简介

打开sentinel控制台页面

左侧导航栏里可以看到 流控规则菜单

点击新增流控规则



可以看到有下列内容：

- 资源名：唯一名称，默认为请求路径

- 针对来源：Sentinel可以针对调用者进行限流，填写微服务名，默认为default（不区分来源）

- 阈值类型 QPS/线程数：

​		QPS(每秒钟的请求数量)：当调用该api的QPS达到阈值的时候，进行限流

​		线程数：当调用该api的线程数达到阈值的时候，进行限流

- 是否集群：Sentinel是否是集群模式，本学习案例中不需要集群

- 流控模式 直接/关联/链路：

​		直接：api达到限流条件时，直接限流

​		关联：当关联的资源达到阈值的时候，就限流自己

​		链路：只记录指定链路上的流量（指定资源从入口资源进来的流量，如果达到阈值，就进行限流）【api级别的针对来源】

- 流控效果 快速失败/Warm up/排队等待：

​		快速失败：直接失败，抛异常

​		Warm Up：根据codeFactor（冷加载因子，默认为3）的值，从阈值/codeFactor，经过预热时长，才达到设置的QPS阈值

​		排队等待：匀速排队，让请求以匀速的速度通过，与值类型必须设置为QPS，否则无效





